---
title: Day2 T2 卡牌游戏 题解
date: 2019-08-04 16:00:22
tags:
- 贪心
categories:
- 题解
---

# 3404. 卡牌游戏 （贪心）  

## 题目描述   

> - 卡牌有两种类型 **攻击型（ATK）** 与 **防御型（DEF）**， 每种卡牌除**类型**外，只有**攻击值**一种属性。    
> - *你*只有**攻击型**卡牌，*对手***两种都有**。
> - 游戏只由*你*操作，~~*对手*挂机（AFK）~~。  
> - 卡牌使用方式：
>> 1. 选择*你*的一张牌，与*对手*的一张**攻击值**&ensp;**小于**该牌**攻击值**的牌。
>> 2. 如果*对手*的牌为**攻击型**，造成等于这两张牌**攻击值**的**差**的伤害。
>> 3. 如果*对手*的牌为**防御型**，不造成伤害。
>> 4. 如果*对手*无牌，造成等于该牌**攻击值**的伤害 ~~（踢脸）~~。
>> 5. 卡牌使用后直接消失。  
> - 卡牌可以不用完。
> 给定*你*与*对手*的手牌，计算**最大伤害量**。  

<!--more-->

## 输入范围  

> 设$n, m$ 分别表示你和对手手牌的数量，$x_{i}$，为第$i$张卡牌的**攻击值**。  
> 则 $1<=n,m<=10^{5}$, $0<=x_{i}<=10^{6}$  
> **50%的数据不含防御牌**  

## 解题思路

&emsp;&emsp;对于自己和对手的牌，我们要考虑怎么打能造成最大伤害。从输入范围来看，我们可以将牌分为不考虑防御牌（不过墙），与考虑防御牌（过墙后低攻走脸）两种情况。

### I   

假设对手没有防御牌
情况一：设$x_{1}, x_{2}$ 分别为我方的两张手牌 ，$y_{1}, y_{2}$ 分别为对手的两张手牌且 $x_{1} > x_{2} > y_{1} > y_{2}$  
&emsp;&emsp;由$x_{1} - y_{1} + x_{2} - y_{2} > x_{1} - y_{2} + x_{2} - y_{1}$   
&emsp;&emsp;得：若两张牌均能攻击另两张牌，则怎么选与伤害和无关。  
情况二：设$x_{1}, x_{2}$ 分别为我方的两张手牌 ，$y_{1}, y_{2}$ 分别为对手的两张手牌且 $x_{1} > y_{1} > x_{2} > y_{2}$  
&emsp;&emsp;由$x_{1} - y_{1} + x_{2} - y_{2} = (x_{1} - y_{2}) + (x_{2} - y_{1}) < x_{1} - y_{2}$   
&emsp;&emsp;得：若两张牌均能分别攻击另两张牌，宁愿少选多打伤害，也不多选少打伤害。 
综合情况一、二，得：若只有攻击牌，对每一张选取差最大的打法最优。  
### II   

考虑对手有防御牌 $_{def}y_{i}$ 定义减法 $x_{i} -\  _{def}y_{j} = 0, x_{i} >\  _{def}y_{j}$  
情况三：设 $x_{1} > x_{2} > _{def}y_{1} > y_{2}$  
&emsp;&emsp;有$x_{1} -\ _{def}y_{1} + x_{2} - y_{2} > x_{1} - y_{2} + x_{2} -\  _{def}y_{1}$    
情况四：设 $x_{1} >\  _{def}y_{1} > x_{2} > y_{2}$  
&emsp;&emsp;有$x_{1} - y_{2} > x_{1} -\  _{def}y_{1} + x_{2} - y_{2}$ （$x_{2} <\  _{def}y_{1}$ 所以不能打）  
综合情况三、四，得：若要**选对方的防御牌**，那么一定要选与自己的牌最相近（即小于这张牌的防御牌的最大攻击值的牌）  

### III   

在这里我们得出了两条策略：  
- 选**攻击牌**就要选择差**最大**的打法。  
- 选**防御牌**就要选择差**最小**的打法。  

又该如何选择这两条策略？  
~~辣李打这个防御牌干马呢~~且慢，如果不选**防御牌**我们不就可以伤害最大化了吗？  
现在我们重新看一下题目，**防御牌**到底有什么作用。  
> 3. 如果*对手*的牌为**防御牌**，不造成伤害。

这一条就是限制我们伤害的一条，使用**攻击牌**攻击防御牌，对伤害的贡献为**0**；  

> 4. 如果*对手*无牌，造成等于该牌**攻击值**的伤害。

有了这一条我们便可以推出，如果我们有牌*没打*，而对手无牌，就可能消耗对面**防御牌**后有更大的伤害。    
便得出了第三条（平行于上面两条的）策略：

- ~~打自己的牌，让对手无牌可打~~打光对手的牌，可能可以打出更大的伤害。

而如果不把对手牌打完，那么打对手**防御牌**就毫无意义，总伤害等于$\sum (\max{x_{i}} - \min{y_{i}})$。  
如果打完对手的牌，就一定已经打完了对手的**防御牌**，剩下对手的牌能够减少的伤害是**固定的**（所有攻击牌的攻击力之和），而自己剩余的牌能够造成的伤害也是**固定的**（剩下的牌的攻击力之和）,总伤害等于$\sum_{\ _{atk}x_{i}} x_{i} - \sum_{\ _{atk}y_{i}} y_{i}$。  
但现在我们还不清楚，打完对手牌和自己的牌那一种更优，因此我们两种方法都要计算然后取最大值。

### IV

判断能不能把对手的牌打完  
1. 自己的牌数**严格大于**对手的牌数（如果一样多就和我们过墙的目的相违背了）。
2. ~~自己的牌**完爆**对手的~~&emsp;降序排序后，自己的每一张牌都能消耗对手同一位置的牌。

### V

现在整体思路就已经很清晰了，
> 1. 判断能否打完所有牌。
>> - 如果能
>> 1. 计算不打完牌的策略（巨贪，最大减最小，直到无牌可打）
>> 2. 计算打完牌的策略（巨不贪，对于每张防御找到最近的牌，消去防御牌后，计算两边攻击值总和的差）
>> 3. 取最大值。
>
>> - 如果不能
>> 1. 巨贪